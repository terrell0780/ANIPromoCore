<!DOCTYPE html>
<html>
<head>
  <title>ANIPromoCore™</title>
</head>
<body>

<h1>ANIPromoCore™</h1>
<p>Autonomous Promotion Core</p>

<hr>

<p>Recommended Tools:</p>

<ul id="tools">
  <li data-id="tool1"><a href="go/tool1.html">Tool 1</a></li>
  <li data-id="tool2"><a href="go/tool2.html">Tool 2</a></li>
</ul>

<script>
async function autoRank() {
  try {
    const response = await fetch('https://anipromocore.terrell0780.workers.dev/?getClicks=true');
    const data = await response.json();

    const ul = document.getElementById('tools');
    const items = Array.from(ul.children);

    items.sort((a, b) => {
      const aUrl = a.querySelector('a').href;
      const bUrl = b.querySelector('a').href;
      return (data[bUrl] || 0) - (data[aUrl] || 0);
    });

    ul.innerHTML = '';
    items.forEach(item => ul.appendChild(item));
  } catch(e) {
    console.log('Auto-rank error', e);
  }
}

autoRank();
</script>

</body>
</html>
